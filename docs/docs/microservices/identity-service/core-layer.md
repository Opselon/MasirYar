---
sidebar_position: 4
---

# لایه Core

این لایه مرکزی‌ترین و مستقل‌ترین بخش میکروسرویس `IdentityService` است. این لایه شامل موجودیت‌های دامنه (Domain Entities) و قوانین کسب‌وکار اصلی است که در تمام بخش‌های دیگر برنامه مورد استفاده قرار می‌گیرند.

## مسئولیت‌ها

-   **تعریف موجودیت‌های دامنه:** این لایه شامل تعریف موجودیت‌های اصلی دامنه، مانند `User`، است. این موجودیت‌ها هیچ وابستگی به تکنولوژی‌های خارجی ندارند و فقط شامل داده‌ها و منطق مربوط به خودشان هستند.
-   **تعریف رابط‌های اصلی:** در صورت نیاز، رابط‌های اصلی که توسط لایه‌های دیگر پیاده‌سازی می‌شوند (مانند `IRepository`) می‌توانند در این لایه تعریف شوند تا وابستگی‌ها به سمت داخل (به سمت `Core`) باشد.
-   **استقلال کامل:** این لایه هیچ وابستگی به لایه‌های دیگر (مانند `Application` یا `Infrastructure`) ندارد و نباید داشته باشد. این استقلال باعث می‌شود که منطق کسب‌وکار اصلی قابل حمل و تست‌پذیر باشد.

## ساختار

-   `Entities`: این پوشه شامل تمام موجودیت‌های دامنه است. هر موجودیت یک کلاس POCO (Plain Old CLR Object) است که شامل خصوصیات (Properties) و در صورت نیاز، متدهایی برای اجرای منطق مربوط به خود است.

## اصول طراحی

-   **Domain-Driven Design (DDD):** این لایه بر اساس اصول طراحی دامنه محور (DDD) ساخته شده است، که در آن تمرکز اصلی بر روی مدل‌سازی دقیق دامنه کسب‌وکار است.
-   **The Dependency Rule:** مطابق با معماری پاک (Clean Architecture)، تمام وابستگی‌ها باید به سمت این لایه باشند. هیچ کدی در `Core` نباید به کدی در لایه‌های بیرونی (مانند `Infrastructure` یا `Api`) وابسته باشد.
