# استراتژی تست برای IdentityService

این پوشه شامل تمام تست‌های خودکار برای میکروسرویس `IdentityService` است. ما از یک رویکرد چند لایه برای اطمینان از کیفیت و صحت عملکرد سرویس استفاده می‌کنیم.

## انواع تست

### ۱. تست‌های واحد (Unit Tests)
- **مکان:** `IdentityService.UnitTests`
- **هدف:** تست منطق کسب‌وکار خالص و مجزا در لایه‌های `Core` و `Application` (مانند Command Handlerها و موجودیت‌های دامنه).
- **وابستگی‌ها:** این تست‌ها **هیچ وابستگی خارجی** ندارند. از EF Core In-Memory Database برای شبیه‌سازی پایگاه داده استفاده می‌شود.
- **سرعت:** بسیار سریع.
- **اجرا:** `dotnet test`

### ۲. تست‌های یکپارچه‌سازی (Integration Tests)
- **مکان:** `IdentityService.IntegrationTests`
- **هدف:** تست جریان کامل یک درخواست از نقطه ورود API (`Controller`) تا پایگاه داده، در داخل یک میکروسرویس واحد.
- **وابستگی‌ها:** این تست‌ها از **Testcontainers** برای راه‌اندازی یک پایگاه داده **واقعی** PostgreSQL در یک کانتینر داکر موقت و ایزوله برای هر مجموعه تست استفاده می‌کنند.
- **سرعت:** کندتر از تست‌های واحد، اما بسیار قابل اعتماد.
- **اجرا:** `dotnet test`
- **نکته:** برای اجرای این تست‌ها، باید Docker بر روی سیستم شما نصب و در حال اجرا باشد.

## نحوه اجرای تمام تست‌ها

برای اجرای تمام تست‌های این میکروسرویس، به ریشه پوشه `IdentityService` بروید و دستور زیر را اجرا کنید:

```shell
dotnet test
```

این دستور به صورت خودکار تمام پروژه‌های تست در Solution را پیدا و اجرا می‌کند.
